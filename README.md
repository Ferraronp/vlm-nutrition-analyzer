# Food Nutrition Analysis API

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –±–ª—é–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ò–ò, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vision-Language Model (VLM) –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –∏ Large Language Model (LLM) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π –∏ –ë–ñ–£.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: VLM —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏, LLM —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –ü—Ä–æ—Å—Ç–æ —É–∫–∞–∂–∏—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é**: –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ multipart/form-data
- **–¢–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: VLM –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–ª—é–¥–∞
- **–†–∞—Å—á–µ—Ç –ë–ñ–£**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π, –±–µ–ª–∫–æ–≤, –∂–∏—Ä–æ–≤ –∏ —É–≥–ª–µ–≤–æ–¥–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Google Colab –∏–Ω—Å—Ç–∞–Ω—Å–∞—Ö —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- GPU —Å CUDA (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è VLM –º–æ–¥–µ–ª–∏)
- Groq API –∫–ª—é—á
- 8GB+ RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB+)

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ Google Colab

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å Cookies

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Google Colab –ø—Ä–æ–∫—Å–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π cookie-—Ç–æ–∫–µ–Ω `colab-runtime-proxy-token`. –ë–µ–∑ —ç—Ç–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ API –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å cookies:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ notebook –≤ Google Colab
2. –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL, –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –ù–∞–∂–º–∏—Ç–µ F12 –∏–ª–∏ Ctrl+Shift+I –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network** (–°–µ—Ç—å)
5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
6. –ù–∞–π–¥–∏—Ç–µ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/health`)
7. –í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞–π–¥–∏—Ç–µ `cookie` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `colab-runtime-proxy-token`

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [colab.ipynb](colab.ipynb) –≤ Google Colab
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —è—á–µ–π–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É
3. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª—É—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `https://8000-gpu-t4-XXXXXXX.prod.colab.dev`

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ API –Ω–∞ —Ä–∞–∑–Ω—ã—Ö Google Colab —Å–µ—Å—Å–∏—è—Ö:

#### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Å—Å–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∫–ª–∞–¥–æ–∫** Google Colab (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-4)
2. –í –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç–µ [colab.ipynb](colab.ipynb)

#### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏

–í –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
!pip install -q -r requirements.txt

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–µ—Å–ª–∏ –Ω–µ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ)
!git clone https://github.com/Ferraronp/vlm-nutrition-analyzer
%cd vlm-nutrition-analyzer

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞
%%writefile .env
GROQ_API_KEY="your_groq_api_key_here"

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
!python app.py
```

#### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ URL –∏ cookies –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ –ø–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π URL –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

**–°–µ—Å—Å–∏—è 1**: `https://8000-gpu-t4-XXXXXXX.prod.colab.dev`  
**–°–µ—Å—Å–∏—è 2**: `https://8000-gpu-t4-YYYYYYY.prod.colab.dev`  
**–°–µ—Å—Å–∏—è 3**: `https://8000-gpu-t4-ZZZZZZZ.prod.colab.dev`  
**–°–µ—Å—Å–∏—è 4**: `https://8000-gpu-t4-WWWWWWW.prod.colab.dev`

–î–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏—Ç–µ cookies —á–µ—Ä–µ–∑ DevTools (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤—ã—à–µ).

#### –®–∞–≥ 4: –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏:

```bash
# –ó–∞–ø—É—Å–∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
python load_balancer.py
```

–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —á–µ—Ä–µ–∑ REST API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ cookies (–≤–∫–ª—é—á–∞—è `colab-runtime-proxy-token`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø–æ—Å–ª–µ 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ multipart/form-data
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞:**
- `POST /instances` - –¥–æ–±–∞–≤–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä
- `DELETE /instances/{id}` - —É–¥–∞–ª–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä
- `GET /instances/{id}` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ
- `GET /instances` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- `GET /analyze` - –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —á–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫
- `GET /health` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
- `GET /stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /analyze?image_url=...` - –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `POST /analyze` - –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ (multipart/form-data)

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞

#### –ß–µ—Ä–µ–∑ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```http
GET /?image_url=https://example.com/food.jpg
```

#### –ß–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
```http
POST /upload
Content-Type: multipart/form-data

file: [–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞]
```

#### –ß–µ—Ä–µ–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Å–ø–æ—Å–æ–±–∞)
```http
GET /?image_url=https://example.com/food.jpg
```

–∏–ª–∏

```http
POST /
Content-Type: multipart/form-data

image_file: [–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞]
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** JPG, JPEG, PNG, WebP, BMP, GIF
**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** 10MB

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "data": {
    "analysis": "1. –†–∏—Å –æ—Ç–≤–∞—Ä–Ω–æ–π (100 –≥) ‚Äî 130 –∫–∫–∞–ª, –±–µ–ª–∫–∏: 2.7 –≥, –∂–∏—Ä—ã: 0.3 –≥, —É–≥–ª–µ–≤–æ–¥—ã: 28 –≥\n2. –ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ (100 –≥) ‚Äî 165 –∫–∫–∞–ª, –±–µ–ª–∫–∏: 31 –≥, –∂–∏—Ä—ã: 3.6 –≥, —É–≥–ª–µ–≤–æ–¥—ã: 0 –≥\n\n–û–±—â–∞—è –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å: ~295 –∫–∫–∞–ª...",
    "vlm_output": "COMPONENTS:\n1. White rice: ~200ml, covers 60% of plate\n2. Chicken breast: 2 large pieces, ~150g total..."
  }
}
```

### –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏

#### –ß–µ—Ä–µ–∑ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```http
GET http://localhost:8080/analyze?image_url=https://example.com/food.jpg
```

#### –ß–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
```http
POST http://localhost:8080/analyze
Content-Type: multipart/form-data

image_file: [–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞]
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```http
GET /health
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

```http
GET /metrics/system
```

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/Ferraronp/vlm-nutrition-analyzer
cd vlm-nutrition-analyzer
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
echo "GROQ_API_KEY=your_groq_api_key_here" > .env
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
python app.py
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.py`:

- `MODEL_NAME`: VLM –º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Qwen/Qwen2.5-VL-7B-Instruct")
- `HOST` –∏ `PORT`: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.0.0.0:8000)
- `MAX_NEW_TOKENS`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è VLM
- `TEMPERATURE`: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è LLM
- `MAX_COMPLETION_TOKENS`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è LLM

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python

```python
import requests

# URL –æ–¥–Ω–æ–≥–æ –∏–∑ –≤–∞—à–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
BASE_URL = "https://8000-gpu-t4-XXXXXXX.prod.colab.dev"

# –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ cookies
cookies = {
    'colab-runtime-proxy-token': 'your_token_here'
}

# –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
response = requests.get(f"{BASE_URL}/", 
                       params={"image_url": "https://example.com/borscht.jpg"},
                       cookies=cookies)

result = response.json()
print(result["data"]["analysis"])

# –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
with open('food.jpg', 'rb') as f:
    files = {'file': f}
    response = requests.post(f"{BASE_URL}/upload", files=files, cookies=cookies)

result = response.json()
print(result["data"]["analysis"])

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
LOAD_BALANCER_URL = "http://localhost:8080"

# –ß–µ—Ä–µ–∑ URL
response = requests.get(f"{LOAD_BALANCER_URL}/analyze", params={
    "image_url": "https://example.com/pizza.jpg"
})

# –ß–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
with open('food.jpg', 'rb') as f:
    files = {'image_file': f}
    response = requests.post(f"{LOAD_BALANCER_URL}/analyze", files=files)

result = response.json()
print(result["data"]["analysis"])
```

### cURL

#### –ß–µ—Ä–µ–∑ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```bash
curl "https://8000-gpu-t4-XXXXXXX.prod.colab.dev/?image_url=https://example.com/pizza.jpg" \
  -H "cookie: colab-runtime-proxy-token=your_token_here"
```

#### –ß–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
```bash
curl -X POST "https://8000-gpu-t4-XXXXXXX.prod.colab.dev/upload" \
  -F "file=@/path/to/your/food.jpg" \
  -H "cookie: colab-runtime-proxy-token=your_token_here"
```

#### –ß–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (URL)
```bash
curl "http://localhost:8080/analyze?image_url=https://example.com/pizza.jpg"
```

#### –ß–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (—Ñ–∞–π–ª)
```bash
curl -X POST "http://localhost:8080/analyze" \
  -F "image_file=@/path/to/your/food.jpg"
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: 15-25 —Å–µ–∫—É–Ω–¥
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤**: 2-4
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä**: ~4 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **VLM —ç—Ç–∞–ø**: –ú–æ–¥–µ–ª—å Qwen2.5-VL –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–ª—é–¥–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏

2. **LLM —ç—Ç–∞–ø**: Groq API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—É—á–∞–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∫–∞–ª–æ—Ä–∏—è–º–∏, –±–µ–ª–∫–∞–º–∏, –∂–∏—Ä–∞–º–∏ –∏ —É–≥–ª–µ–≤–æ–¥–∞–º–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app.py              # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ vlm_service.py      # VLM —Å–µ—Ä–≤–∏—Å (Qwen2.5-VL)
‚îú‚îÄ‚îÄ llm_service.py      # LLM —Å–µ—Ä–≤–∏—Å (Groq)
‚îú‚îÄ‚îÄ model_loader.py     # –ó–∞–≥—Ä—É–∑–∫–∞ VLM –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ load_balancer.py    # –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ prompts.py          # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è VLM –∏ LLM
‚îú‚îÄ‚îÄ memory_monitor.py   # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
‚îî‚îÄ‚îÄ colab.ipynb         # Google Colab notebook
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
curl http://localhost:8000/health

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ URL
curl "http://localhost:8000/?image_url=https://example.com/test.jpg"

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
curl -X POST "http://localhost:8000/upload" \
  -F "file=@/path/to/test.jpg"

# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫
curl "http://localhost:8080/analyze?image_url=https://example.com/test.jpg"
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **API –∫–ª—é—á–∏**: –•—Ä–∞–Ω–∏—Ç–µ –≤–∞—à–∏ Groq API –∫–ª—é—á–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Cookies**: –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–ª—É—á–∏—Ç—å `colab-runtime-proxy-token` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Google Colab –ø—Ä–æ–∫—Å–∏
- **–õ–∏–º–∏—Ç—ã**: –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ Google Colab —Å–µ—Å—Å–∏–∏ (–¥–æ 6 —á–∞—Å–æ–≤)
- **GPU**: –î–ª—è VLM –º–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è GPU —Å CUDA
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –†–∞—Å—á–µ—Ç—ã —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –±–ª—é–¥ —Å –ø–æ–º–æ—â—å—é –ò–ò**